{% extends "news/news.html" %}

{% block searchBox %}

    <div id="searchContainer" class="container mb-40">
        <h3 id="searchHeading">Teen<strong>HUB</strong><span class="subHeading">News</span></h3>
        <div id="searchBox" class="inner-addon right-addon">
          <i class="glyphicon glyphicon-search"></i>
          <input type="text" class="form-control lightGrayBg searchText" placeholder="Search" id="inputBox" />
        </div>
    </div>

{% endblock %}

{% block SearchedNews %}
    <div id="searchNews" class="container">

    </div>
{% endblock %}


{% block ajaxBlock %}

    <script type="text/javascript" src="../../static/js/jquery.min.js"></script>
    <script type="text/javascript">


    $(document).ready(function() {
        $(document).scroll(function () {
            var scroll = $(this).scrollTop();
    				//console.log(scroll);
            var topDist = $("#news_navbar").position();
    				//console.log(topDist);
            if (scroll > topDist.top) {
                $('#news_navbar').css({"position":"fixed","top":"0","right":"0","left":"0","z-index":"2"});
                $('#news_navbar').addClass("lightGrayBg");
            } else {
                $('#news_navbar').css({"position":"static","top":"auto"});
                $('#news_navbar').removeClass("lightGrayBg");
            }
        });
    });

    $("#menuSourceToggle").on('click',function(){
      $("#source").toggleClass('source-wrapper-hide');
      $("#source").toggleClass('source-wrapper-show');
    })


    var slideIndex = 1;
    render_feed();

    $("#prev").click(function(){
         plusSlides(-1);
    });

    $("#next").click(function(){
        plusSlides(+1);
    });

    $("#link1").click(function(){
        currentSlides(1);
    });

    $("#link2").click(function(){
        currentSlides(2);
    });

    $("#link3").click(function(){
        currentSlides(3);
    });

    function plusSlides(n) {
        showSlides(slideIndex+=n);
    }

    function currentSlides(n){
        showSlides(slideIndex = n);
    }

    function showSlides(n) {
        var i;
        var navs = document.getElementsByClassName(' news-link');
        //console.log(navs.length);
        if(n > navs.length){
          slideIndex = 1;
        }
        if (n<1) {
          slideIndex = navs.length;
        }
        //console.log(navs);
        for (var i = 0; i < navs.length; i++) {
          navs[i].className=navs[i].className.replace(" current-app","");
        }
        //console.log(navs);
        navs[slideIndex-1].className += " current-app";

        render_feed();

    }

    function render_feed(){
      $("#link"+slideIndex).addClass('news-nav-color');
        if(slideIndex==1){
          if ($("#link2").hasClass("news-nav-color")){
             $("#link2").removeClass("news-nav-color");
          }
          if ($("#link3").hasClass("news-nav-color")){
              $("#link3").removeClass("news-nav-color");
          }
          displayAll();
        }
        else if (slideIndex == 2) {
          if ($("#link1").hasClass("news-nav-color")){
             $("#link1").removeClass("news-nav-color");
          }
          if ($("#link3").hasClass("news-nav-color")){
             $("#link3").removeClass("news-nav-color");
          }
          displayEntertainment();
        }
        else if (slideIndex == 3) {
          if ($("#link2").hasClass("news-nav-color")){
             $("#link2").removeClass("news-nav-color");
          }
          if ($("#link1").hasClass("news-nav-color")){
             $("#link1").removeClass("news-nav-color");
          }
          displayTechnology();
        }
    }

    // function checkImageUrl(imageUrl){
    //   console.log(imageUrl);
    //   var xhr = new XMLHttpRequest();
    //   xhr.open('HEAD', imageUrl, false);
    //   xhr.send();
    //
    //   if (xhr.status == "404") {
    //       console.log("File doesn't exist");
    //       return false;
    //   } else {
    //       console.log("File exists");
    //       return true;
    //   }
    // }
    function differnceOfDate(date){
      var date1 = new Date();
      var date2 = new Date(date);
      var difference = Math.abs(date1-date2);
      console.log("date1 "+date1);
      console.log("date2 "+date2);
      console.log("msec " +difference);
      var sec =Math.floor(difference/1000);
      if(sec<60){
        //console.log(sec+" second ago");
        return sec+" seconds ago";
      }
      else{
        var minutes = Math.floor(sec/60);
        if(minutes<60){
          //console.log(minutes+" minutes ago");
          return minutes+" minutes ago";
        }
        else{
          var hour = Math.floor(minutes/60);
          if(hour<24){
            //console.log(hour+" hour ago");
            return hour+" hours ago";
          }
          else{
            var days = Math.floor(hour/24);
            if (days<7) {
              //console.log(days+" days ago");
              return days+" days ago";
            }
            else{
              var weeks = Math.floor(days/30);
              if (weeks<4) {
                //console.log(weeks+" weeks ago");
                return weeks+" weeks ago";
              }
              else{
                var months = Math.floor(weeks/4);
                if(months<12){
                  //console.log(months+" months ago");
                  return months+" months ago";
                }
                else {
                  var years =Math.floor(months/12);
                  //console.log(year+" years ago");
                  return year+" years ago";
                }
              }
            }
          }
        }
      }
    }

    function displayAll(){

      var all_news_sources=get_all_news_source();

        $.ajax({
            method:"GET",
            url:"https://newsapi.org/v2/top-headlines?sources="+all_news_sources+"&apiKey=c97376d8658b4d3ebd52b87297491737",
            dataType: "json",
            success: function(result){
                //console.log(result.articles);
                var articles = result.articles;
                var articleList="";
                var list = "";
                $.each(articles,(index,article)=>{
                        // console.log(article.author);
                        // console.log(article.title);
                        // console.log(article.description);
                        // console.log(article.source.name);
                        // console.log(article.urlToImage);
                        // console.log(article.url);
                        // console.log("-------------");
                        //console.log(article.publishedAt);
                        var ago = differnceOfDate(article.publishedAt);

                    if(article.urlToImage !== null ){

                          articleList +=
                              '<div class="news-item"><a target="_blank" href="'+article.url+'">'+
                                  '<div class="news-item-image">'+
                                      '<img class="news-image" src="'+article.urlToImage+'">'+
                                  '</div></a>'+
                                  '<div class="news-item-info">'+
                                      '<a class="title" target="_blank" href="'+article.url+'">'+article.title+'</a>'+
                                      '<div class="description"><p>'+article.description+'</p></div>'+
                                      '<div class="other-detail" >'+
                                              '<div class="source-name">'+article.source.name+'</div>'+
                                              '<div class="published">'+ago+'</div>'+
                                      '</div>'+
                                  '</div>'+
                              '</div>'
                              ;
                    }
                });
                {% if request.session.id %}
                  articleList += `    <div id="sourceNews">
                                        <h3>Entertainment &</h3>
                                        <h3>Technology</h3>
                                        <form action="{% url 'save_all_news_list' %}" method="post" Content-Type="application/json">
                                          {% csrf_token %}
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="buzzfeed" name="buzzfeed"
                                            {% if news.buzzfeed == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="buzzfeed">
                                              Buzzfeed
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="daily-mail" name="daily_mail"
                                            {% if news.daily_mail == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="daily-mail">
                                              Daily Mail
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="entertainment-weekly" name="entertainment_weekly"
                                            {% if news.entertainment_weekly == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="entertainment-weekly">
                                              Entertainment-Weekly
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="ign" name="ign"
                                            {% if news.ign == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="ign">
                                              IGN
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="mashable" name="mashable"
                                            {% if news.mashable == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="mashable">
                                              Mashable
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="mtv-news" name="mtv_news"
                                            {% if news.mtv_news == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="mtv-news">
                                              MTV News
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="polygon" name="polygon"
                                            {% if news.polygon == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="polygon">
                                              Polygon
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="the-lad-bible" name="the_lad_bible"
                                            {% if news.the_lad_bible == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="the-lad-bible">
                                              The Lad Bible
                                            </label>
                                          </div>

                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="ars-technica" name="ars_technica"
                                            {% if news.ars_technica == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="ars-technica">
                                              Ars Technica
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="crypto-coins-news" name="crypto_coins_news"
                                            {% if news.crypto_coins_news == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="crypto-coins-news">
                                              Crypto Coins News
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="hacker-news" name="hacker_news"
                                            {% if news.hacker_news == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="hacker-news">
                                              Hacker News
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="recode" name="recode"
                                            {% if news.recode == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="recode">
                                              Recode
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="techcrunch" name="techcrunch"
                                            {% if news.techcrunch == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="techcrunch">
                                              TechCrunch
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="techradar" name="techradar"
                                            {% if news.techradar == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="techradar">
                                              TechRadar
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="the-next-web" name="the_next_web"
                                            {% if news.the_next_web == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="the-next-web">
                                              The Next Web
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="the-verge" name="the_verge"
                                            {% if news.the_verge == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="the-verge">
                                              The Verge
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="wired" name="wired"
                                            {% if news.wired == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="wired">
                                              Wired
                                            </label>
                                          </div>
                                          <button type="submit" class="btn btn-primary">Submit</button>
                                        </form
                                      </div>`;
                {% endif %}

                {% if request.session.id %}
                  list += `    <div id="sourceNewsList" >
                                        <h3>Entertainment &</h3>
                                        <h3>Technology</h3>
                                        <form action="{% url 'save_all_news_list' %}" method="post" Content-Type="application/json">
                                          {% csrf_token %}
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="buzzfeed" name="buzzfeed"
                                            {% if news.buzzfeed == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="buzzfeed">
                                              Buzzfeed
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="daily-mail" name="daily_mail"
                                            {% if news.daily_mail == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="daily-mail">
                                              Daily Mail
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="entertainment-weekly" name="entertainment_weekly"
                                            {% if news.entertainment_weekly == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="entertainment-weekly">
                                              Entertainment-Weekly
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="ign" name="ign"
                                            {% if news.ign == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="ign">
                                              IGN
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="mashable" name="mashable"
                                            {% if news.mashable == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="mashable">
                                              Mashable
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="mtv-news" name="mtv_news"
                                            {% if news.mtv_news == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="mtv-news">
                                              MTV News
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="polygon" name="polygon"
                                            {% if news.polygon == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="polygon">
                                              Polygon
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="the-lad-bible" name="the_lad_bible"
                                            {% if news.the_lad_bible == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="the-lad-bible">
                                              The Lad Bible
                                            </label>
                                          </div>

                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="ars-technica" name="ars_technica"
                                            {% if news.ars_technica == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="ars-technica">
                                              Ars Technica
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="crypto-coins-news" name="crypto_coins_news"
                                            {% if news.crypto_coins_news == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="crypto-coins-news">
                                              Crypto Coins News
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="hacker-news" name="hacker_news"
                                            {% if news.hacker_news == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="hacker-news">
                                              Hacker News
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="recode" name="recode"
                                            {% if news.recode == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="recode">
                                              Recode
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="techcrunch" name="techcrunch"
                                            {% if news.techcrunch == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="techcrunch">
                                              TechCrunch
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="techradar" name="techradar"
                                            {% if news.techradar == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="techradar">
                                              TechRadar
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="the-next-web" name="the_next_web"
                                            {% if news.the_next_web == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="the-next-web">
                                              The Next Web
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="the-verge" name="the_verge"
                                            {% if news.the_verge == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="the-verge">
                                              The Verge
                                            </label>
                                          </div>
                                          <div class="form-check">
                                            <input class="form-check-input" type="checkbox" value="1" id="wired" name="wired"
                                            {% if news.wired == 1 %}
                                              checked
                                            {% endif %}>
                                            <label class="form-check-label" for="wired">
                                              Wired
                                            </label>
                                          </div>
                                          <button type="submit" class="btn btn-primary">Submit</button>
                                        </form
                                      </div>`;
                {% endif %}

                $("#searchNews").html(articleList);
                $("#source").html(list);
            }
        });
    }


        function displayEntertainment(){


          var entertainment_news_sources=get_entertainment_news_source();

          $.ajax({
              method:"GET",
              url:"https://newsapi.org/v2/top-headlines?sources="+entertainment_news_sources+"&apiKey=c97376d8658b4d3ebd52b87297491737",
              dataType: "json",
              success: function(result){
                  //console.log(result.articles);
                  var articles = result.articles;
                  var articleList="";
                  var list = "";
                  $.each(articles,(index,article)=>{
                          // console.log(article.author);
                          // console.log(article.title);
                          // console.log(article.description);
                          // console.log(article.source.name);
                          // console.log(article.urlToImage);
                          // console.log(article.url);
                          // console.log("-------------");
                          var ago = differnceOfDate(article.publishedAt);


                      if(article.urlToImage !== null){
                          // articleList += `
                          //     <div class="news-item"><a target="_blank" href="${article.url}">
                          //         <div class="news-item-image">
                          //             <img class="news-image" src="${article.urlToImage}">
                          //         </div></a>
                          //         <div class="news-item-info">
                          //             <a class="title" target="_blank" href="${article.url}">${article.title}</a>
                          //             <div class="description"><p>${article.description}</p></div>
                          //             <div class="other-detail" >
                          //                     <div class="source-name">${article.source.name}</div>
                          //                     <div class="published">`+ago+`</div>
                          //             </div>
                          //         </div>
                          //     </div>
                          //     `;

                              articleList +=
                                  '<div class="news-item"><a target="_blank" href="'+article.url+'">'+
                                      '<div class="news-item-image">'+
                                          '<img class="news-image" src="'+article.urlToImage+'">'+
                                      '</div></a>'+
                                      '<div class="news-item-info">'+
                                          '<a class="title" target="_blank" href="'+article.url+'">'+article.title+'</a>'+
                                          '<div class="description"><p>'+article.description+'</p></div>'+
                                          '<div class="other-detail" >'+
                                                  '<div class="source-name">'+article.source.name+'</div>'+
                                                  '<div class="published">'+ago+'</div>'+
                                          '</div>'+
                                      '</div>'+
                                  '</div>'
                                  ;
                      }
                  });
                  {% if request.session.id %}
                    articleList += `    <div id="sourceNews">
                                          <h3>Entertainment</h3>
                                          <form action="{% url 'save_entertain_news_list' %}" method="post" Content-Type="application/json">
                                            {% csrf_token %}
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="buzzfeed" name="buzzfeed"
                                              {% if news.buzzfeed == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="buzzfeed">
                                                Buzzfeed
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="daily-mail" name="daily_mail"
                                              {% if news.daily_mail == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="daily-mail">
                                                Daily Mail
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="entertainment-weekly" name="entertainment_weekly"
                                              {% if news.entertainment_weekly == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="entertainment-weekly">
                                                Entertainment-Weekly
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="ign" name="ign"
                                              {% if news.ign == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="ign">
                                                IGN
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="mashable" name="mashable"
                                              {% if news.mashable == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="mashable">
                                                Mashable
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="mtv-news" name="mtv_news"
                                              {% if news.mtv_news == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="mtv-news">
                                                MTV News
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="polygon" name="polygon"
                                              {% if news.polygon == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="polygon">
                                                Polygon
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="the-lad-bible" name="the_lad_bible"
                                              {% if news.the_lad_bible == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="the-lad-bible">
                                                The Lad Bible
                                              </label>
                                            </div>
                                            <button type="submit" class="btn btn-primary">Submit</button>
                                          </form>


                                        </div>`;
                  {% endif %}

                  {% if request.session.id %}
                    list += `    <div id="sourceNewsList">
                                          <h3>Entertainment</h3>
                                          <form action="{% url 'save_entertain_news_list' %}" method="post" Content-Type="application/json">
                                            {% csrf_token %}
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="buzzfeed" name="buzzfeed"
                                              {% if news.buzzfeed == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="buzzfeed">
                                                Buzzfeed
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="daily-mail" name="daily_mail"
                                              {% if news.daily_mail == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="daily-mail">
                                                Daily Mail
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="entertainment-weekly" name="entertainment_weekly"
                                              {% if news.entertainment_weekly == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="entertainment-weekly">
                                                Entertainment-Weekly
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="ign" name="ign"
                                              {% if news.ign == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="ign">
                                                IGN
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="mashable" name="mashable"
                                              {% if news.mashable == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="mashable">
                                                Mashable
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="mtv-news" name="mtv_news"
                                              {% if news.mtv_news == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="mtv-news">
                                                MTV News
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="polygon" name="polygon"
                                              {% if news.polygon == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="polygon">
                                                Polygon
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="the-lad-bible" name="the_lad_bible"
                                              {% if news.the_lad_bible == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="the-lad-bible">
                                                The Lad Bible
                                              </label>
                                            </div>
                                            <button type="submit" class="btn btn-primary">Submit</button>
                                          </form>


                                        </div>`;
                  {% endif %}
                  $("#searchNews").html(articleList);
                  $("#source").html(list);
              }
          });
    }

        function displayTechnology(){

          var technology_news_sources=get_technology_news_source();

          $.ajax({
              method:"GET",
              url:"https://newsapi.org/v2/top-headlines?sources="+technology_news_sources+"&apiKey=c97376d8658b4d3ebd52b87297491737",
              dataType: "json",
              success: function(result){
                  //console.log(result.articles);
                  var articles = result.articles;
                  var articleList="";
                  var list = "";
                  $.each(articles,(index,article)=>{
                          // console.log(article.author);
                          // console.log(article.title);
                          // console.log(article.description);
                          // console.log(article.source.name);
                          // console.log(article.urlToImage);
                          // console.log(article.url);
                          // console.log("-------------");
                          var ago = differnceOfDate(article.publishedAt);


                      if(article.urlToImage !== null){
                          // articleList += `
                          //     <div class="news-item"><a target="_blank" href="${article.url}">
                          //         <div class="news-item-image">
                          //             <img class="news-image" src="${article.urlToImage}">
                          //         </div></a>
                          //         <div class="news-item-info">
                          //             <a class="title" target="_blank" href="${article.url}">${article.title}</a>
                          //             <div class="description"><p>${article.description}</p></div>
                          //             <div class="other-detail" >
                          //                     <div class="source-name">${article.source.name}</div>
                          //                     <div class="published">`+ago+`</div>
                          //             </div>
                          //         </div>
                          //     </div>
                          //     `;

                          articleList +=
                              '<div class="news-item"><a target="_blank" href="'+article.url+'">'+
                                  '<div class="news-item-image">'+
                                      '<img class="news-image" src="'+article.urlToImage+'">'+
                                  '</div></a>'+
                                  '<div class="news-item-info">'+
                                      '<a class="title" target="_blank" href="'+article.url+'">'+article.title+'</a>'+
                                      '<div class="description"><p>'+article.description+'</p></div>'+
                                      '<div class="other-detail" >'+
                                              '<div class="source-name">'+article.source.name+'</div>'+
                                              '<div class="published">'+ago+'</div>'+
                                      '</div>'+
                                  '</div>'+
                              '</div>'
                              ;
                      }
                  });
                  {% if request.session.id %}
                    articleList += `    <div id="sourceNews">

                                          <h3>Technology</h3>
                                          <form action="{% url 'save_tech_news_list' %}" method="post" Content-Type="application/json">
                                            {% csrf_token %}
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="ars-technica" name="ars_technica"
                                              {% if news.ars_technica == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="ars-technica">
                                                Ars Technica
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="crypto-coins-news" name="crypto_coins_news"
                                              {% if news.crypto_coins_news == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="crypto-coins-news">
                                                Crypto Coins News
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="hacker-news" name="hacker_news"
                                              {% if news.hacker_news == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="hacker-news">
                                                Hacker News
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="recode" name="recode"
                                              {% if news.recode == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="recode">
                                                Recode
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="techcrunch" name="techcrunch"
                                              {% if news.techcrunch == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="techcrunch">
                                                TechCrunch
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="techradar" name="techradar"
                                              {% if news.techradar == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="techradar">
                                                TechRadar
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="the-next-web" name="the_next_web"
                                              {% if news.the_next_web == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="the-next-web">
                                                The Next Web
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="the-verge" name="the_verge"
                                              {% if news.the_verge == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="the-verge">
                                                The Verge
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="wired" name="wired"
                                              {% if news.wired == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="wired">
                                                Wired
                                              </label>
                                            </div>
                                            <button type="submit" class="btn btn-primary">Submit</button>
                                          </form>
                                        </div>`;
                  {% endif %}

                  {% if request.session.id %}
                    list += `    <div id="sourceNewsList">

                                          <h3>Technology</h3>
                                          <form action="{% url 'save_tech_news_list' %}" method="post" Content-Type="application/json">
                                            {% csrf_token %}
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="ars-technica" name="ars_technica"
                                              {% if news.ars_technica == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="ars-technica">
                                                Ars Technica
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="crypto-coins-news" name="crypto_coins_news"
                                              {% if news.crypto_coins_news == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="crypto-coins-news">
                                                Crypto Coins News
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="hacker-news" name="hacker_news"
                                              {% if news.hacker_news == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="hacker-news">
                                                Hacker News
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="recode" name="recode"
                                              {% if news.recode == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="recode">
                                                Recode
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="techcrunch" name="techcrunch"
                                              {% if news.techcrunch == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="techcrunch">
                                                TechCrunch
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="techradar" name="techradar"
                                              {% if news.techradar == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="techradar">
                                                TechRadar
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="the-next-web" name="the_next_web"
                                              {% if news.the_next_web == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="the-next-web">
                                                The Next Web
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="the-verge" name="the_verge"
                                              {% if news.the_verge == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="the-verge">
                                                The Verge
                                              </label>
                                            </div>
                                            <div class="form-check">
                                              <input class="form-check-input" type="checkbox" value="1" id="wired" name="wired"
                                              {% if news.wired == 1 %}
                                                checked
                                              {% endif %}>
                                              <label class="form-check-label" for="wired">
                                                Wired
                                              </label>
                                            </div>
                                            <button type="submit" class="btn btn-primary">Submit</button>
                                          </form>
                                        </div>`;
                  {% endif %}
                  $("#searchNews").html(articleList);
                  $("#source").html(list);
              }
          });
    }


     $("#inputBox").keypress(function(e) {
         var key = e.keyCode;
         if(key == 13){
           if(slideIndex==1){
               searchAll();
           }
           else if (slideIndex == 2) {
               searchEntertainment();
           }
           else if (slideIndex == 3) {
               searchTechnology();
           }
        }
     });

     function searchAll(){
       var inputText = $("#inputBox").val();
       //console.log(inputText);

       var all_news_sources=get_all_news_source();

         $.ajax({
             method:"GET",
             url:"https://newsapi.org/v2/everything?sources="+all_news_sources+"&q="+inputText+"&apiKey=c97376d8658b4d3ebd52b87297491737",
             dataType: "json",
             success: function(result){
                 //console.log(result.articles);
                 var articles = result.articles;
                 var articleList="";
                 $.each(articles,(index,article)=>{
                         // console.log(article.author);
                         // console.log(article.title);
                         // console.log(article.description);
                         // console.log(article.source.name);
                         // console.log(article.urlToImage);
                         // console.log(article.url);
                         // console.log("-------------");
                         var ago = differnceOfDate(article.publishedAt);

                     if(article.urlToImage !== null){
                         // articleList += `
                         //     <div class="news-item"><a target="_blank" href="${article.url}">
                         //         <div class="news-item-image">
                         //             <img class="news-image" src="${article.urlToImage}">
                         //         </div></a>
                         //         <div class="news-item-info">
                         //             <a class="title" target="_blank" href="${article.url}">${article.title}</a>
                         //             <div class="description"><p>${article.description}</p></div>
                         //             <div class="other-detail" >
                         //                     <div class="source-name">${article.source.name}</div>
                         //                     <div class="published">`+ago+`</div>
                         //             </div>
                         //         </div>
                         //     </div>
                         //     `;
                         articleList +=
                             '<div class="news-item"><a target="_blank" href="'+article.url+'">'+
                                 '<div class="news-item-image">'+
                                     '<img class="news-image" src="'+article.urlToImage+'">'+
                                 '</div></a>'+
                                 '<div class="news-item-info">'+
                                     '<a class="title" target="_blank" href="'+article.url+'">'+article.title+'</a>'+
                                     '<div class="description"><p>'+article.description+'</p></div>'+
                                     '<div class="other-detail" >'+
                                             '<div class="source-name">'+article.source.name+'</div>'+
                                             '<div class="published">'+ago+'</div>'+
                                     '</div>'+
                                 '</div>'+
                             '</div>'
                             ;
                     }
                 });
                 {% if request.session.id %}
                   articleList += `    <div id="sourceNews">
                                         <h3>Entertainment &</h3>
                                         <h3>Technology</h3>
                                         <form action="{% url 'save_all_news_list' %}" method="post" Content-Type="application/json">
                                           {% csrf_token %}
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="buzzfeed" name="buzzfeed"
                                             {% if news.buzzfeed == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="buzzfeed">
                                               Buzzfeed
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="daily-mail" name="daily_mail"
                                             {% if news.daily_mail == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="daily-mail">
                                               Daily Mail
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="entertainment-weekly" name="entertainment_weekly"
                                             {% if news.entertainment_weekly == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="entertainment-weekly">
                                               Entertainment-Weekly
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="ign" name="ign"
                                             {% if news.ign == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="ign">
                                               IGN
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="mashable" name="mashable"
                                             {% if news.mashable == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="mashable">
                                               Mashable
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="mtv-news" name="mtv_news"
                                             {% if news.mtv_news == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="mtv-news">
                                               MTV News
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="polygon" name="polygon"
                                             {% if news.polygon == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="polygon">
                                               Polygon
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="the-lad-bible" name="the_lad_bible"
                                             {% if news.the_lad_bible == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="the-lad-bible">
                                               The Lad Bible
                                             </label>
                                           </div>

                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="ars-technica" name="ars_technica"
                                             {% if news.ars_technica == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="ars-technica">
                                               Ars Technica
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="crypto-coins-news" name="crypto_coins_news"
                                             {% if news.crypto_coins_news == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="crypto-coins-news">
                                               Crypto Coins News
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="hacker-news" name="hacker_news"
                                             {% if news.hacker_news == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="hacker-news">
                                               Hacker News
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="recode" name="recode"
                                             {% if news.recode == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="recode">
                                               Recode
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="techcrunch" name="techcrunch"
                                             {% if news.techcrunch == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="techcrunch">
                                               TechCrunch
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="techradar" name="techradar"
                                             {% if news.techradar == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="techradar">
                                               TechRadar
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="the-next-web" name="the_next_web"
                                             {% if news.the_next_web == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="the-next-web">
                                               The Next Web
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="the-verge" name="the_verge"
                                             {% if news.the_verge == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="the-verge">
                                               The Verge
                                             </label>
                                           </div>
                                           <div class="form-check">
                                             <input class="form-check-input" type="checkbox" value="1" id="wired" name="wired"
                                             {% if news.wired == 1 %}
                                               checked
                                             {% endif %}>
                                             <label class="form-check-label" for="wired">
                                               Wired
                                             </label>
                                           </div>
                                           <button type="submit" class="btn btn-primary">Submit</button>
                                         </form
                                       </div>`;
                 {% endif %}
                 $("#searchNews").html(articleList);
             }
         });
     }

     function searchEntertainment(){
       var inputText = $("#inputBox").val();
       //console.log(inputText);
       var entertainment_news_sources=get_entertainment_news_source();

       $.ajax({
           method:"GET",
           url:"https://newsapi.org/v2/everything?sources="+entertainment_news_sources+"&q="+inputText+"&apiKey=c97376d8658b4d3ebd52b87297491737",
           dataType: "json",
           success: function(result){
               //console.log(result.articles);
               var articles = result.articles;
               var articleList="";
               $.each(articles,(index,article)=>{
                       // console.log(article.author);
                       // console.log(article.title);
                       // console.log(article.description);
                       // console.log(article.source.name);
                       // console.log(article.urlToImage);
                       // console.log(article.url);
                       // console.log("-------------");
                       var ago = differnceOfDate(article.publishedAt);

                   if(article.urlToImage !== null){
                       // articleList += `
                       //     <div class="news-item"><a target="_blank" href="${article.url}">
                       //         <div class="news-item-image">
                       //             <img class="news-image" src="${article.urlToImage}">
                       //         </div></a>
                       //         <div class="news-item-info">
                       //             <a class="title" target="_blank" href="${article.url}">${article.title}</a>
                       //             <div class="description"><p>${article.description}</p></div>
                       //             <div class="other-detail" >
                       //                     <div class="source-name">${article.source.name}</div>
                       //                     <div class="published">`+ago+`</div>
                       //             </div>
                       //         </div>
                       //     </div>
                       //     `;

                       articleList +=
                           '<div class="news-item"><a target="_blank" href="'+article.url+'">'+
                               '<div class="news-item-image">'+
                                   '<img class="news-image" src="'+article.urlToImage+'">'+
                               '</div></a>'+
                               '<div class="news-item-info">'+
                                   '<a class="title" target="_blank" href="'+article.url+'">'+article.title+'</a>'+
                                   '<div class="description"><p>'+article.description+'</p></div>'+
                                   '<div class="other-detail" >'+
                                           '<div class="source-name">'+article.source.name+'</div>'+
                                           '<div class="published">'+ago+'</div>'+
                                   '</div>'+
                               '</div>'+
                           '</div>'
                           ;
                   }
               });
               {% if request.session.id %}
                 articleList += `    <div id="sourceNews">
                                       <h3>Entertainment</h3>
                                       <form action="{% url 'save_entertain_news_list' %}" method="post" Content-Type="application/json">
                                         {% csrf_token %}
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="buzzfeed" name="buzzfeed"
                                           {% if news.buzzfeed == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="buzzfeed">
                                             Buzzfeed
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="daily-mail" name="daily_mail"
                                           {% if news.daily_mail == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="daily-mail">
                                             Daily Mail
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="entertainment-weekly" name="entertainment_weekly"
                                           {% if news.entertainment_weekly == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="entertainment-weekly">
                                             Entertainment-Weekly
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="ign" name="ign"
                                           {% if news.ign == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="ign">
                                             IGN
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="mashable" name="mashable"
                                           {% if news.mashable == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="mashable">
                                             Mashable
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="mtv-news" name="mtv_news"
                                           {% if news.mtv_news == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="mtv-news">
                                             MTV News
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="polygon" name="polygon"
                                           {% if news.polygon == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="polygon">
                                             Polygon
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="the-lad-bible" name="the_lad_bible"
                                           {% if news.the_lad_bible == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="the-lad-bible">
                                             The Lad Bible
                                           </label>
                                         </div>
                                         <button type="submit" class="btn btn-primary">Submit</button>
                                       </form>


                                     </div>`;
               {% endif %}
               $("#searchNews").html(articleList);
           }
       });
     }

     function searchTechnology(){
       var inputText = $("#inputBox").val();
       //console.log(inputText);
       var technology_news_sources=get_technology_news_source();

       $.ajax({
           method:"GET",
           url:"https://newsapi.org/v2/everything?sources="+technology_news_sources+"&q="+inputText+"&apiKey=c97376d8658b4d3ebd52b87297491737",
           dataType: "json",
           success: function(result){
               //console.log(result.articles);
               var articles = result.articles;
               var articleList="";
               $.each(articles,(index,article)=>{
                       // console.log(article.author);
                       // console.log(article.title);
                       // console.log(article.description);
                       // console.log(article.source.name);
                       // console.log(article.urlToImage);
                       // console.log(article.url);
                       // console.log("-------------");
                       var ago = differnceOfDate(article.publishedAt);

                   if(article.urlToImage !== null){
                       // articleList += `
                       //     <div class="news-item"><a target="_blank" href="${article.url}">
                       //         <div class="news-item-image">
                       //             <img class="news-image" src="${article.urlToImage}">
                       //         </div></a>
                       //         <div class="news-item-info">
                       //             <a class="title" target="_blank" href="${article.url}">${article.title}</a>
                       //             <div class="description"><p>${article.description}</p></div>
                       //             <div class="other-detail" >
                       //                     <div class="source-name">${article.source.name}</div>
                       //                     <div class="published">`+ago+`</div>
                       //             </div>
                       //         </div>
                       //     </div>
                       //     `;
                       articleList +=
                           '<div class="news-item"><a target="_blank" href="'+article.url+'">'+
                               '<div class="news-item-image">'+
                                   '<img class="news-image" src="'+article.urlToImage+'">'+
                               '</div></a>'+
                               '<div class="news-item-info">'+
                                   '<a class="title" target="_blank" href="'+article.url+'">'+article.title+'</a>'+
                                   '<div class="description"><p>'+article.description+'</p></div>'+
                                   '<div class="other-detail" >'+
                                           '<div class="source-name">'+article.source.name+'</div>'+
                                           '<div class="published">'+ago+'</div>'+
                                   '</div>'+
                               '</div>'+
                           '</div>'
                           ;
                   }
               });
               {% if request.session.id %}
                 articleList += `    <div id="sourceNews">

                                       <h3>Technology</h3>
                                       <form action="{% url 'save_tech_news_list' %}" method="post" Content-Type="application/json">
                                         {% csrf_token %}
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="ars-technica" name="ars_technica"
                                           {% if news.ars_technica == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="ars-technica">
                                             Ars Technica
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="crypto-coins-news" name="crypto_coins_news"
                                           {% if news.crypto_coins_news == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="crypto-coins-news">
                                             Crypto Coins News
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="hacker-news" name="hacker_news"
                                           {% if news.hacker_news == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="hacker-news">
                                             Hacker News
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="recode" name="recode"
                                           {% if news.recode == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="recode">
                                             Recode
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="techcrunch" name="techcrunch"
                                           {% if news.techcrunch == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="techcrunch">
                                             TechCrunch
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="techradar" name="techradar"
                                           {% if news.techradar == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="techradar">
                                             TechRadar
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="the-next-web" name="the_next_web"
                                           {% if news.the_next_web == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="the-next-web">
                                             The Next Web
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="the-verge" name="the_verge"
                                           {% if news.the_verge == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="the-verge">
                                             The Verge
                                           </label>
                                         </div>
                                         <div class="form-check">
                                           <input class="form-check-input" type="checkbox" value="1" id="wired" name="wired"
                                           {% if news.wired == 1 %}
                                             checked
                                           {% endif %}>
                                           <label class="form-check-label" for="wired">
                                             Wired
                                           </label>
                                         </div>
                                         <button type="submit" class="btn btn-primary">Submit</button>
                                       </form>
                                     </div>`;
               {% endif %}
               $("#searchNews").html(articleList);
           }
       });
     }

     function get_all_news_source(){
       var news_list=`
       {% if news.buzzfeed == 1 %}
         buzzfeed,
       {% endif %}

       {% if news.daily_mail == 1 %}
         daily-mail,
       {% endif %}

       {% if news.entertainment_weekly == 1 %}
         entertainment-weekly,
       {% endif %}

       {% if news.ign == 1 %}
         ign,
       {% endif %}

       {% if news.mashable == 1 %}
         mashable,
       {% endif %}

       {% if news.mtv_news == 1 %}
         mtv-news,
       {% endif %}

       {% if news.polygon == 1 %}
         polygon,
       {% endif %}

       {% if news.the_lad_bible == 1 %}
         the-lad-bible,
       {% endif %}



       {% if news.ars_technica == 1 %}
         ars-technica,
       {% endif %}

       {% if news.crypto_coins_news == 1 %}
         crypto-coins-news,
       {% endif %}

       {% if news.hacker_news == 1 %}
         hacker-news,
       {% endif %}

       {% if news.recode == 1 %}
         recode,
       {% endif %}

       {% if news.techcrunch == 1 %}
         techcrunch,
       {% endif %}

       {% if news.techradar == 1 %}
         techradar,
       {% endif %}

       {% if news.the_next_web == 1 %}
         the-next-web,
       {% endif %}

       {% if news.the_verge == 1 %}
         the-verge,
       {% endif %}

       {% if news.wired == 1 %}
         wired,
       {% endif %}`;

       //console.log(news_list);
       news_list = news_list.replace(/ /g,'');
       //console.log(news_list+ "removing whitespaces");
       news_list = news_list.replace(/(\r\n|\n|\r)/gm,"")
       //console.log(news_list+ "removing newline");

       news_list = news_list.substring(0,news_list.length-1);
       //console.log(news_list);

       return news_list;
     }

     function get_entertainment_news_source(){
       var news_list=`
       {% if news.buzzfeed == 1 %}
         buzzfeed,
       {% endif %}

       {% if news.daily_mail == 1 %}
         daily-mail,
       {% endif %}

       {% if news.entertainment_weekly == 1 %}
         entertainment-weekly,
       {% endif %}

       {% if news.ign == 1 %}
         ign,
       {% endif %}

       {% if news.mashable == 1 %}
         mashable,
       {% endif %}

       {% if news.mtv_news == 1 %}
         mtv-news,
       {% endif %}

       {% if news.polygon == 1 %}
         polygon,
       {% endif %}

       {% if news.the_lad_bible == 1 %}
         the-lad-bible,
       {% endif %}`;

       //console.log(news_list);
       news_list = news_list.replace(/ /g,'');
       //console.log(news_list+ "removing whitespaces");
       news_list = news_list.replace(/(\r\n|\n|\r)/gm,"")
       //console.log(news_list+ "removing newline");

       news_list = news_list.substring(0,news_list.length-1);
       //console.log(news_list);

       return news_list;
     }

     function get_technology_news_source(){
       var news_list=`
       {% if news.ars_technica == 1 %}
         ars-technica,
       {% endif %}

       {% if news.crypto_coins_news == 1 %}
         crypto-coins-news,
       {% endif %}

       {% if news.hacker_news == 1 %}
         hacker-news,
       {% endif %}

       {% if news.recode == 1 %}
         recode,
       {% endif %}

       {% if news.techcrunch == 1 %}
         techcrunch,
       {% endif %}

       {% if news.techradar == 1 %}
         techradar,
       {% endif %}

       {% if news.the_next_web == 1 %}
         the-next-web,
       {% endif %}

       {% if news.the_verge == 1 %}
         the-verge,
       {% endif %}

       {% if news.wired == 1 %}
         wired,
       {% endif %}`;

       //console.log(news_list);
       news_list = news_list.replace(/ /g,'');
       //console.log(news_list+ "removing whitespaces");
       news_list = news_list.replace(/(\r\n|\n|\r)/gm,"")
       //console.log(news_list+ "removing newline");

       news_list = news_list.substring(0,news_list.length-1);
       //console.log(news_list);

       return news_list;
     }

    </script>

{% endblock %}
